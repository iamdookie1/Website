<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Audio Cut Editor</title>

<style>
:root{
--bg:radial-gradient(circle at top,#1c1c1c,#000);
--gold:#d4af37;
--panel:rgba(18,18,18,.95);
--text:#f3f3f3;
--muted:#9a9a9a;
}
*{box-sizing:border-box}
body{
margin:0;
min-height:100vh;
background:var(--bg);
font-family:system-ui,sans-serif;
color:var(--text);
}
.wrapper{max-width:1200px;margin:auto;padding:40px}
.panel{
background:var(--panel);
border:1px solid rgba(212,175,55,.25);
border-radius:18px;
padding:28px;
margin-bottom:28px;
}
h1{text-align:center;color:var(--gold)}
.import{
border:2px dashed rgba(212,175,55,.35);
padding:50px;
border-radius:14px;
text-align:center;
cursor:pointer
}
.import input{display:none}
.controls,.cuts,.advanced{display:none}
.row{margin-bottom:20px}
label{display:flex;justify-content:space-between;color:var(--muted);margin-bottom:6px}
.slider-row{display:flex;gap:12px;align-items:center}
input[type=range]{
flex:1;
appearance:none;
height:6px;
background:linear-gradient(90deg,#b8962e,#f0d57a);
border-radius:6px;
outline:none
}
input[type=range]::-webkit-slider-thumb{
appearance:none;
width:18px;
height:18px;
border-radius:50%;
background:#000;
border:2px solid var(--gold)
}
input[type=number]{
width:90px;
padding:8px;
border-radius:10px;
border:1px solid rgba(212,175,55,.35);
background:#000;
color:var(--gold);
font-weight:600
}
.buttons{display:flex;gap:12px;flex-wrap:wrap}
button{
padding:14px;
border-radius:12px;
border:none;
font-weight:600;
cursor:pointer
}
.primary{background:linear-gradient(135deg,#b8962e,#f0d57a);color:#000}
.secondary{background:transparent;border:1px solid rgba(212,175,55,.35);color:var(--gold)}
.cut{
border:1px solid rgba(212,175,55,.35);
border-radius:12px;
padding:14px;
margin-bottom:14px
}
.cut header{display:flex;justify-content:space-between}
small{color:var(--muted)}
.time{text-align:center;margin-top:10px;color:var(--gold)}
</style>
</head>

<body>
<div class="wrapper">

<div class="panel">
<h1>Import File</h1>
<label class="import">
<input type="file" id="file" accept="audio/*">
Click to import audio
</label>
</div>

<div class="panel controls" id="editor">
<h1>Cut Editor</h1>

<div class="row">
<label>Cut Start <span id="sv"></span></label>
<div class="slider-row">
<input type="range" id="start" step="0.01">
<input type="number" id="startN" step="0.01">
</div>
</div>

<div class="row">
<label>Cut End <span id="ev"></span></label>
<div class="slider-row">
<input type="range" id="end" step="0.01">
<input type="number" id="endN" step="0.01">
</div>
</div>

<div class="row">
<label>Fade <span id="fv"></span></label>
<div class="slider-row">
<input type="range" id="fade" min="0" max="3" step="0.05">
<input type="number" id="fadeN" min="0" max="3" step="0.05">
</div>
</div>

<div class="buttons">
<button class="secondary" onclick="addCut()">Add Cut</button>
<button class="primary" onclick="play()">Preview</button>
<button class="secondary" onclick="stop()">Stop</button>
</div>

<div class="time" id="timeDisplay">00:00 / 00:00</div>
</div>

<div class="panel cuts" id="cutsPanel">
<h1>Removed Parts</h1>
<div id="cutsList"></div>
</div>

</div>

<script>
let ctx,buffer,src,startTime,raf;
let cutList=[];

const file=document.getElementById("file");
const editor=document.getElementById("editor");
const cutsPanel=document.getElementById("cutsPanel");
const cutsList=document.getElementById("cutsList");
const timeDisplay=document.getElementById("timeDisplay");

const start=document.getElementById("start");
const end=document.getElementById("end");
const fade=document.getElementById("fade");

const startN=document.getElementById("startN");
const endN=document.getElementById("endN");
const fadeN=document.getElementById("fadeN");

const sv=document.getElementById("sv");
const ev=document.getElementById("ev");
const fv=document.getElementById("fv");

[start,end,fade].forEach((r,i)=>{
const n=[startN,endN,fadeN][i];
r.oninput=()=>{n.value=r.value;updateVals()};
n.oninput=()=>{r.value=n.value;updateVals()};
});

function updateVals(){
sv.textContent=start.value+"s";
ev.textContent=end.value+"s";
fv.textContent=fade.value+"s";
}

file.onchange=async e=>{
ctx=new AudioContext();
buffer=await ctx.decodeAudioData(await e.target.files[0].arrayBuffer());
[start,end].forEach(i=>{
i.max=buffer.duration;
document.getElementById(i.id+"N").max=buffer.duration;
});
end.value=endN.value=buffer.duration;
updateVals();
editor.style.display="block";
cutsPanel.style.display="block";
timeDisplay.textContent=`00:00 / ${fmt(buffer.duration)}`;
};

function addCut(){
if(+start.value>=+end.value)return;
cutList.push({s:+start.value,e:+end.value});
renderCuts();
}

function renderCuts(){
cutsList.innerHTML="";
cutList.forEach((c,i)=>{
cutsList.innerHTML+=`
<div class="cut">
<header>
<b>Cut ${i+1}</b>
<button class="secondary" onclick="cutList.splice(${i},1);renderCuts()">Delete</button>
</header>
<small>${c.s}s â†’ ${c.e}s</small>
</div>`;
});
}

function play(){
stop();
src=ctx.createBufferSource();
src.buffer=buffer;
src.connect(ctx.destination);
startTime=ctx.currentTime;
src.start();
tick(buffer.duration);
}

function stop(){
if(src)src.stop();
cancelAnimationFrame(raf);
}

function tick(d){
const t=ctx.currentTime-startTime;
timeDisplay.textContent=`${fmt(t)} / ${fmt(d)}`;
if(t<d)raf=requestAnimationFrame(()=>tick(d));
}

function fmt(t){
const m=Math.floor(t/60);
const s=Math.floor(t%60).toString().padStart(2,"0");
return `${m}:${s}`;
}
</script>
</body>
</html>
